# 第7回課題
## 確認していただきたいこと
   1. これまで構築した環境の脆弱性の例と対策
   2. 課題の感想

## 考えられる脆弱性

### DDos攻撃
#### 内容
コンピューターシステムへの不正侵入、プログラムの破壊、データ改ざんといった行為をする攻撃者が、複数の一般コンピューターで行いサービスを停止させること。
今回構築した環境だとrailsのライブラリのパッケージ情報が更新されず、脆弱性を突かれ、WebサーバであるNginxに大量のリクエストを送りつけ、Webサーバ・アプリケーションサーバを停止させる

#### 対策
攻撃対策ツールの導入　AWS Shield Standard　や WAFなど
ネットワークに流れるデータの量の異常を監視することで、DDoS攻撃が表面化する前に感知し、被害の拡大を防ぐネットワーク監視システムを導入する

### SSRF攻撃　
#### 内容
公開サーバーの設定の不備により、通常ではアクセスできない内部の非公開サーバーへ不正アクセスできてしまう状態。気密情報を盗んだり不正操作を行うおそれがある
今回構築した環境だと、1部の機密情報ファイルを公開環境上で入手し、RDSの機密情報やS3の機密データが盗まれるおそれがある。

#### 対策
AmazonInspectorで脆弱性のスキャンを行い、重要度が一番高いものは 1ヶ月以内にパッチを適用する、などルール付けして運用する。
SSMPatchManagerというサービスもあり、パッチの自動化支援を利用する

参考にしたサイトは[こちら](https://www.f5.com/ja_jp/solutions/special/2020ALLFSSRFProtectionJPNOV29_01-LP-DLCAWAF)

### HTTP通信　
#### 内容
HTTP通信は暗号化させておらず平文でネットワーク上を流れるため、盗聴、改ざんなどの脅威に晒される可能性がある。ベーシック認証を用いた場合、認証情報（IDやパスワード）が漏洩する可能性がある。

#### 対策
HTTP通信の経路はSSL接続とは違い通信が暗号化されておらず、ALBならリスナールールでHTTPアクセスをHTTPSに転送するルールを追加する、またはCloudFrontならビューワープロコルポリシーでHTTPS限定にするなど、必ずHTTPS(SSL)通信を経由する

参考にしたサイトは[こちら](http://www.chuu-information.com/security/fragile_6.html)

### IAMのパスワードやアクセスキーが流出する
#### 内容
パスワードやアクセスキーが流出し、損害を被る。
#### 対策
MFA認証(2要素認証)で本人以外のログインを防ぐ。ロールを中心とした権限とし、アクセスキー自体はReadOnlyとする。git-secretsを用い、Publicのリポジトリに誤ってPushしないようにする。

### 感想
- 環境を構築しシステムが稼働して終わりでなく、脆弱性とセキュリティ対策をどうやっていくかを考え、課題に取り組んでいる頃から、認識のすり合わせをする必要があると学びました。
- 先日のディーネットさんの企業イベントで環境構築をすると意外と脆弱性がすぐ見つかると言っていて、今の自分は「認証情報の流出」や「人為的な過負荷」は1つ2つイメージできましたが、アプリケーションや通信の脆弱性の事例がすんなり出てこないので、 OWASP Top10等を用いてもっと学習する必要があると感じました。
- すべての脆弱性を防ぐためのセキュリティ対策はできないので、エンジニアとしてどこまでリスクを許容して、どこを防いだり転嫁するのかの基準をどのように決めているのか気になりました。講師・メンターさんの方が実際に経験された脆弱性の事例もお聞きしたいなと思いました。IAMアクセスキーが流出し、10秒不正アクセスされ仮想通貨のマイニングをされた事例は、リスクの対処の優先度は高めかなと感じました。